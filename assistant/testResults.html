<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doctor Portal - Patient Search</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Arial', sans-serif;
        }
        
        .sidebar {
            min-height: 100vh;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            background-color: #f8f9fa;
        }
        
        .sidebar .nav-link {
            color: #343a40;
            border-radius: 0;
            padding: 12px 20px;
            margin-bottom: 5px;
        }
        
        .sidebar .nav-link:hover {
            background-color: #e9ecef;
        }
        
        .sidebar .nav-link.active {
            background-color: #0d6efd;
            color: white;
        }
        
        .sidebar .nav-link i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        .content {
            padding: 20px;
        }
        
        .top-nav {
            background-image: url('/api/placeholder/1200/100');
            background-size: cover;
            background-position: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        .top-nav::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(13, 110, 253, 0.85);
            z-index: 0;
        }
        
        .top-nav .container-fluid {
            position: relative;
            z-index: 1;
        }
        
        .top-nav .navbar-brand {
            color: white;
            font-weight: bold;
            margin-left: 15px; /* Align with sidebar */
        }
        
        .logout-btn {
            color: white;
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .logout-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
        }
        
        .search-section {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .patient-data-section {
            background-color: #fff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .form-label {
            font-weight: 500;
        }
        
        .blood-data, .treatment-data {
            border-left: 4px solid #0d6efd;
            padding-left: 15px;
            margin-top: 10px;
        }
        
        .treatment-data {
            border-left-color: #20c997;
        }
        
        @media (max-width: 768px) {
            .sidebar {
                min-height: auto;
            }
            
            .top-nav .navbar-brand {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container-fluid p-0">
       <!-- Top Navigation -->
       <nav class="navbar navbar-expand-lg top-nav">
        <div class="container-fluid">
            <button class="navbar-toggler bg-white" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="navbar-brand ms-lg-3" href="#">LeukemiaVision</a>
            <div class="ms-auto d-flex">
                <div class="dropdown me-3">
                    <a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-bell"></i>
                        <span class="badge bg-danger">3</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="#">New appointment</a></li>
                        <li><a class="dropdown-item" href="#">Schedule update</a></li>
                    </ul>
                </div>
                <div class="dropdown">
                    <a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person-circle"></i> Dr. Smith
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="#">Profile</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#">Logout</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    
    <div class="row g-0">
        <!-- Sidebar -->
        <div class="col-lg-2 sidebar p-0">
            <div class="collapse d-lg-block" id="sidebarMenu">
                <div class="d-flex flex-column p-3">
                    <ul class="nav nav-pills flex-column mb-auto">
                        <li class="nav-item">
                            <a href="homepage.html" class="nav-link ">
                                <i class="bi bi-speedometer2"></i> Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="account.html" class="nav-link">
                                <i class="bi bi-person"></i> Account
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="schedule.html" class="nav-link">
                                <i class="bi bi-calendar-week"></i> Schedule
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="appointment.html" class="nav-link">
                                <i class="bi bi-calendar-check"></i> Appointments
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="medications.html" class="nav-link">
                                <i class="bi bi-capsule"></i> Medication
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="progress.html" class="nav-link">
                                <i class="bi bi-graph-up"></i> Patient Progress
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="testResults.html" class="nav-link active">
                                <i class="bi bi-file-earmark-text"></i> Reports
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="qa.html" class="nav-link">
                                <i class="bi bi-question-circle"></i> Q&A
                            </a>
                        </li>
                    </ul>
                    <hr>
                    <div>
                        <button class="btn btn-danger w-100">
                            <i class="bi bi-box-arrow-right"></i> Logout
                        </button>
                    </div>
                </div>
            </div>
        </div>
            
            <!-- Main Content -->
            <div class="col-lg-10 content">
                <h2><i class="bi bi-search"></i> Patient Search</h2>

                <!-- Search Section -->
                <div class="search-section">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="input-group mb-3">
                                <input type="text" class="form-control" placeholder="Search by patient name" aria-label="Patient Name/ID">
                                <button class="btn btn-primary" type="button"><i class="bi bi-search"></i> Search</button>
                            </div>
                        </div>
                    </div>
                </div>
          
                <!-- AI Smear Blood Image Analysis Section -->
                <h4 class="mt-4 mb-3"><i class="bi bi-file-earmark-image"></i> AI Smear Blood Image Analysis</h4>
                <div class="patient-data-section">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="smearBloodImage" class="form-label">Upload Smear Blood Image</label>
                                <input type="file" class="form-control" id="smearBloodImage" accept="image/*">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="analysisDate" class="form-label">Date of Analysis</label>
                                <input type="date" class="form-control" id="analysisDate">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="analysisResult" class="form-label">Cancer Stage</label>
                                <textarea class="form-control" id="analysisResult" rows="3" placeholder="AI analysis result" readonly></textarea>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="cancerStage" class="form-label"> Analysis Result</label>
                                <input type="text" class="form-control" id="cancerStage" placeholder="AI determined cancer stage" readonly>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="wbcCount" class="form-label">WBC Count (k/ul)</label>
                                <input type="number" class="form-control" id="wbcCount" placeholder="White Blood Cell Count" readonly>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="blastCellPercentage" class="form-label">Blast Cell Percentage</label>
                                <input type="number" class="form-control" id="blastCellPercentage" placeholder="Blast Cell Percentage" readonly>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="hemoglobin" class="form-label">Hemoglobin (g/dl)</label>
                                <input type="number" class="form-control" id="hemoglobin" placeholder="Hemoglobin Level" readonly>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="platelets" class="form-label">Platelets (k/ul)</label>
                                <input type="number" class="form-control" id="platelets" placeholder="Platelets Count" readonly>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-end">
                        <button class="btn btn-primary me-2" onclick="analyzeImage()">Analyze Image</button>
                    </div>
                </div>
                
                <!-- Blood Test Data Section -->
                <h4 class="mt-4 mb-3"><i class="bi bi-droplet"></i>Blood Test Result</h4>
                <div class="blood-data">
                    <div class="row">
                        <div class="col-12">
                            <div class="mb-3">
                                <label for="recommendations" class="form-label">Recommendations</label>
                                <textarea class="form-control" id="recommendations" rows="3" placeholder="Doctor's recommendations and notes"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                    
                <!-- Treatment Data Section -->
                <h4 class="mt-4 mb-3"><i class="bi bi-clipboard2-pulse"></i> Treatment Result</h4>
                <div class="treatment-data">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="treatmentName" class="form-label">Treatment Name</label>
                                <input type="text" class="form-control" id="treatmentName" placeholder="e.g., Chemotherapy, Radiation">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="treatmentCycles" class="form-label">Treatment Cycles</label>
                                <input type="number" class="form-control" id="treatmentCycles" placeholder="Number of cycles">
                            </div>
                        </div>
                    </div>
                        
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="treatmentProgression" class="form-label">Treatment Progression</label>
                                <select class="form-select" id="treatmentProgression">
                                    <option selected>Select progression</option>
                                    <option value="Not Started">Not Started</option>
                                    <option value="In Progress">In Progress</option>
                                    <option value="Completed">Completed</option>
                                    <option value="On Hold">On Hold</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="nextCycleDate" class="form-label">Next Cycle Date</label>
                                <input type="date" class="form-control" id="nextCycleDate">
                            </div>
                        </div>
                    </div>
                        
                    <div class="row">
                        <div class="col-12">
                            <div class="mb-3">
                                <label class="form-label">Treatment Notes</label>
                                <textarea class="form-control" rows="3" placeholder="Additional notes about the treatment plan"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                    
                <!-- Action Buttons -->
                <div class="d-flex justify-content-end mt-4">
                    <button class="btn btn-success me-2">Save Patient Record</button>
                    <button class="btn btn-outline-primary">Generate Report</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Patient Search Results Modal -->
    <div class="modal fade" id="searchResultsModal" tabindex="-1" aria-labelledby="searchResultsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="searchResultsModalLabel">Patient Search Results</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Patient ID</th>
                                    <th>Name</th>
                                    <th>Age</th>
                                    <th>Last Visit</th>
                                    <th>Status</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>P12345</td>
                                    <td>John Doe</td>
                                    <td>45</td>
                                    <td>2025-03-01</td>
                                    <td><span class="badge bg-warning text-dark">In Treatment</span></td>
                                    <td><button class="btn btn-sm btn-primary">Select</button></td>
                                </tr>
                                <tr>
                                    <td>P12346</td>
                                    <td>Jane Doe</td>
                                    <td>38</td>
                                    <td>2025-02-15</td>
                                    <td><span class="badge bg-success">Remission</span></td>
                                    <td><button class="btn btn-sm btn-primary">Select</button></td>
                                </tr>
                                <tr>
                                    <td>P12347</td>
                                    <td>James Smith</td>
                                    <td>52</td>
                                    <td>2025-03-10</td>
                                    <td><span class="badge bg-danger">Critical</span></td>
                                    <td><button class="btn btn-sm btn-primary">Select</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Initialize the Bootstrap modal outside the event listener
        document.addEventListener('DOMContentLoaded', function() {
            const searchButtons = document.querySelectorAll('.btn-primary[type="button"]');
            const searchResultsModal = new bootstrap.Modal(document.getElementById('searchResultsModal'));
    
            searchButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // In a real application, this would perform an AJAX search
                    // For demo purposes, we'll just show the modal with example results
                    searchResultsModal.show();
                });
            });
    
            // Function to handle file uploads for blood smear images
            document.getElementById('smearBloodImage').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    // In a real application, this would upload the file and display a preview
                    const fileNameDisplay = document.createElement('div');
                    fileNameDisplay.className = 'mt-2 text-muted';
                    fileNameDisplay.innerHTML = `<i class="bi bi-file-earmark-image"></i> ${file.name}`;
    
                    // Remove any previous filename display
                    const previousDisplay = this.parentElement.querySelector('.text-muted');
                    if (previousDisplay) {
                        previousDisplay.remove();
                    }
    
                    // Add the new filename display
                    this.parentElement.appendChild(fileNameDisplay);
                }
            });
    
            // Add event listener for the view button next to smear blood image
            document.getElementById('viewSmearBloodImage').addEventListener('click', function() {
                const fileInput = document.getElementById('smearBloodImage');
                if (fileInput.files.length > 0) {
                    // In a real application, this would display the image in a modal or viewer
                    alert('Image viewer would open here with the selected file.');
                } else {
                    alert('No image file selected.');
                }
            });
        });
        
        // Function to simulate AI analysis of the blood smear image
        function analyzeImage() {
            const fileInput = document.getElementById('smearBloodImage');
            if (fileInput.files.length === 0) {
                alert('Please upload a blood smear image first.');
                return;
            }
            
            // Simulate AI analysis (in a real application, this would involve sending the image to a backend service)
            const analysisResult = 'AI analysis result: Abnormal cells detected.';
            const cancerStage = 'Stage 2';
            const wbcCount = 12.5; // Example value
            const blastCellPercentage = 30; // Example value
            const hemoglobin = 10.2; // Example value
            const platelets = 150; // Example value
            
            document.getElementById('analysisResult').value = analysisResult;
            document.getElementById('cancerStage').value = cancerStage;
            document.getElementById('wbcCount').value = wbcCount;
            document.getElementById('blastCellPercentage').value = blastCellPercentage;
            document.getElementById('hemoglobin').value = hemoglobin;
            document.getElementById('platelets').value = platelets;
        }
    </script>
</body>
</html>